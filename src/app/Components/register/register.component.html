<section class="bg-main-light shadow p-2 my-2 rounded-4">
 <div class="">
    <form [formGroup]="registerForm" class="my-3" (ngSubmit)="handleSubmit()">
        <h1 class="text-main">Register Now</h1>
        <div>
            <label for="name" class="form-label mt-2">Name:</label>
            <input type="text" class="form-control" id="name" formControlName="name" [ngClass]="{
               'is-valid': !registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty),
               'is-invalid': registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty )

            }">
            @if (registerForm.get('name')?.touched || registerForm.get('name')?.dirty  ) {
                   @if (registerForm.get('name')?.hasError('required')) {
                        <div class="alert alert-danger mt-1">Name Is Required</div>
                 }
                   @else if (registerForm.get('name')?.hasError('minlength')) {
                        <div class="alert alert-danger mt-1">Minimum 3 Characters</div>
                 }
            }
          
        </div>
        <div>
            <label for="email" class="form-label mt-2">E-mail:</label>
            <input type="email" class="form-control" id="email" formControlName="email" [ngClass]="{
               'is-valid': !registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty),
               'is-invalid': registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty )

            }">
              @if (registerForm.get('email')?.touched ||registerForm.get('email')?.dirty ) {
                   @if (registerForm.get('email')?.hasError('required')) {
                        <div class="alert alert-danger">Email Is Required</div>
                 }
                   @else if (registerForm.get('email')?.hasError('email')) {
                        <div class="alert alert-danger">Enter Valid Email</div>
                 }
            }
        </div>
        <div>
            <label for="phone" class="form-label mt-2">Phone:</label>
            <input type="text" class="form-control" id="phone" formControlName="phone" [ngClass]="{
               'is-valid': !registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty),
               'is-invalid': registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty )

            }">
              @if (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty ) {
                   @if (registerForm.get('phone')?.hasError('required')) {
                        <div class="alert alert-danger">Phone Number Is Required</div>
                 }
            }
        </div>
        <div>
            <label for="password" class="form-label mt-2">Password:</label>
            <input type="password" class="form-control" id="password" formControlName="password" [ngClass]="{
               'is-valid': !registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty),
               'is-invalid': registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty )

            }">
              @if (registerForm.get('password')?.touched || registerForm.get('password')?.dirty ) {
                   @if (registerForm.get('password')?.hasError('required')) {
                        <div class="alert alert-danger">Password Is Required</div>
                 }
            }
        </div>
        <div>
            <label for="RePassword" class="form-label mt-2">RePassword:</label>
            <input type="password" class="form-control" id="RePassword" formControlName="rePassword" [ngClass]="{
               'is-valid': !registerForm.get('rePassword')?.errors && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty),
               'is-invalid': registerForm.get('rePassword')?.errors && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty )

            }">
           @if (registerForm.get('rePassword')?.touched && registerForm.errors) {
          <div class="alert alert-danger">The password and reset password must be the same </div>
            }
        </div>
       
        <button class="btn-main my-2 p-2" type="submit">Register 
        @if(isLoading){  <span><i class="fas fa-spin fa-spinner "></i></span>}
        </button>
           @if (errormsg) {
                        <div class="alert alert-danger mt-2">{{errormsg}}</div>
        }
    </form>
 </div>
</section>